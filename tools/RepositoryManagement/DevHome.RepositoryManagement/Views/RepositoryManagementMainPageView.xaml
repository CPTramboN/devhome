<?xml version="1.0" encoding="utf-8" ?>
<commonviews:ToolPage
    x:Class="DevHome.RepositoryManagement.Views.RepositoryManagementMainPageView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:behaviors="using:DevHome.Common.Behaviors"
    xmlns:commonCustomControls="using:DevHome.Common.Environments.CustomControls"
    xmlns:commonviews="using:DevHome.Common.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:DevHome.RepositoryManagement.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewmodels="using:DevHome.RepositoryManagement.ViewModels"
    behaviors:NavigationViewHeaderBehavior.HeaderMode="Never"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
    mc:Ignorable="d">
    <commonviews:ToolPage.Resources>
        <ResourceDictionary Source="ms-appx:///DevHome.Common/Environments/Templates/EnvironmentsTemplates.xaml" />
    </commonviews:ToolPage.Resources>
    <Grid>
        <Grid.Resources>
            <!--  Three Dot Button template  -->
            <DataTemplate x:Key="ThreeDotsButton">
                <Button x:Uid="MoreOptionsButton" Style="{StaticResource HorizontalThreeDotsStyle}">
                    <Button.Flyout>
                        <MenuFlyout>
                            <MenuFlyoutItem Text="Open in File Explorer" />
                            <MenuFlyoutItem Text="Open in Command Line" />
                            <MenuFlyoutItem Text="Move Repository" />
                            <MenuFlyoutItem Text="Add to Config file" />
                            <MenuFlyoutItem Text="Run to config file" />
                            <MenuFlyoutItem Text="Remove from this list" />
                            <MenuFlyoutItem Text="Delete Repository" />
                        </MenuFlyout>
                    </Button.Flyout>
                </Button>
            </DataTemplate>
        </Grid.Resources>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition Height="auto" />
            <RowDefinition Height="auto" />
        </Grid.RowDefinitions>
        <Grid
            x:Name="TitleGrid"
            Grid.Row="0"
            MaxWidth="{ThemeResource MaxPageContentWidth}"
            Margin="{ThemeResource HeaderMargin}"
            ColumnSpacing="5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition Width="auto" />
                <ColumnDefinition Width="auto" />
            </Grid.ColumnDefinitions>
            <TextBlock
                x:Name="EnvironmentsHeader"
                Grid.Column="0"
                HorizontalAlignment="Left"
                Style="{ThemeResource SubtitleTextBlockStyle}"
                Text="Repositories" />
            <Button Grid.Column="1" Content="Add repository" />
            <Button
                Grid.Column="2"
                Margin="0,0,50,0"
                Content="Clone repository" />
        </Grid>
        <Grid
            Grid.Row="1"
            Margin="{ThemeResource HeaderMargin}"
            ColumnSpacing="5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition MaxWidth="300" />
                <ColumnDefinition />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <TextBox Grid.Column="0" PlaceholderText="Filter" />
            <TextBlock
                Grid.Column="2"
                VerticalAlignment="Center"
                Text="Sort:" />
            <ComboBox Grid.Column="3" MinWidth="150">
                <ComboBoxItem Content="A to Z" IsSelected="True" />
                <ComboBoxItem Content="Z to A" />
            </ComboBox>
        </Grid>
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <ListView Margin="{ThemeResource HeaderMargin}" ItemsSource="{x:Bind ViewModel.Items, Mode=OneWay}">
                <ListView.Header>
                    <Grid
                        Padding="0,0,0,5"
                        BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}"
                        BorderThickness="0,0,0,1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Name" />
                        <TextBlock Grid.Column="1" Text="Clone path" />
                        <TextBlock Grid.Column="2" Text="Latest commit" />
                        <TextBlock Grid.Column="3" Text="Branch" />
                    </Grid>
                </ListView.Header>
                <ListView.ItemTemplate>
                    <DataTemplate x:DataType="viewmodels:RepositoryManagementItemViewModel">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition />
                                <ColumnDefinition />
                                <ColumnDefinition />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="{x:Bind RepositoryName}" />
                            <TextBlock
                                Grid.Column="1"
                                Text="{x:Bind ClonePath}"
                                ToolTipService.ToolTip="{x:Bind ClonePath}" />
                            <TextBlock Grid.Column="2" Text="{x:Bind LatestCommit}" />
                            <TextBlock Grid.Column="3" Text="{x:Bind Branch}" />
                            <Button
                                x:Uid="MoreOptionsButton"
                                Grid.Column="4"
                                Style="{StaticResource HorizontalThreeDotsStyle}">
                                <Button.Content>
                                    <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xE712;" />
                                </Button.Content>
                                <Button.Flyout>
                                    <MenuFlyout>
                                        <MenuFlyoutItem Text="Open in File Explorer" />
                                        <MenuFlyoutItem Text="Open in Command Line" />
                                        <MenuFlyoutItem Text="Move Repository" />
                                        <MenuFlyoutItem Text="Add to Config file" />
                                        <MenuFlyoutItem Text="Run to config file" />
                                        <MenuFlyoutItem Text="Remove from this list" />
                                        <MenuFlyoutItem Text="Delete Repository" />
                                    </MenuFlyout>
                                </Button.Flyout>
                            </Button>
                        </Grid>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Grid>
    </Grid>
</commonviews:ToolPage>
